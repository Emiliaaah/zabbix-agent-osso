<?xml version="1.0" encoding="UTF-8"?>
<zabbix_export>
    <version>4.4</version>
    <date>2019-12-06T12:17:12Z</date>
    <groups>
        <group>
            <name>TEMPLATES</name>
        </group>
    </groups>
    <templates>
        <template>
            <template>Template OSSO NVMe SMART</template>
            <name>Template OSSO NVMe SMART</name>
            <groups>
                <group>
                    <name>TEMPLATES</name>
                </group>
            </groups>
            <applications>
                <application>
                    <name>NVMe</name>
                </application>
            </applications>
            <items>
                <item>
                    <name>NVMe: Has NVMe disk</name>
                    <type>ZABBIX_ACTIVE</type>
                    <key>nvme.device.exists</key>
                    <delay>1h</delay>
                    <history>30d</history>
                    <trends>90d</trends>
                    <applications>
                        <application>
                            <name>NVMe</name>
                        </application>
                    </applications>
                    <request_method>POST</request_method>
                </item>
                <item>
                    <name>NVMe: Has /usr/sbin/nvme</name>
                    <type>ZABBIX_ACTIVE</type>
                    <key>vfs.file.exists[/usr/sbin/nvme]</key>
                    <delay>1h</delay>
                    <history>30d</history>
                    <trends>90d</trends>
                    <applications>
                        <application>
                            <name>NVMe</name>
                        </application>
                    </applications>
                    <request_method>POST</request_method>
                </item>
            </items>
            <discovery_rules>
                <discovery_rule>
                    <name>NVMe devices</name>
                    <type>ZABBIX_ACTIVE</type>
                    <key>nvme.device.discovery</key>
                    <delay>30m</delay>
                    <item_prototypes>
                        <item_prototype>
                            <name>Nvme: Available spare for {#NVME}</name>
                            <type>ZABBIX_ACTIVE</type>
                            <key>nvme.device.smart[{#NVME},available_spare]</key>
                            <delay>5m</delay>
                            <history>1w</history>
                            <trends>90d</trends>
                            <units>%</units>
                            <applications>
                                <application>
                                    <name>NVMe</name>
                                </application>
                            </applications>
                            <request_method>POST</request_method>
                        </item_prototype>
                        <item_prototype>
                            <name>Nvme: Available spare threshold for {#NVME}</name>
                            <type>ZABBIX_ACTIVE</type>
                            <key>nvme.device.smart[{#NVME},available_spare_threshold]</key>
                            <delay>5m</delay>
                            <history>1w</history>
                            <trends>90d</trends>
                            <units>%</units>
                            <applications>
                                <application>
                                    <name>NVMe</name>
                                </application>
                            </applications>
                            <request_method>POST</request_method>
                        </item_prototype>
                        <item_prototype>
                            <name>Nvme: Controller busy time for {#NVME}</name>
                            <type>ZABBIX_ACTIVE</type>
                            <key>nvme.device.smart[{#NVME},controller_busy_time]</key>
                            <delay>5m</delay>
                            <history>1w</history>
                            <trends>90d</trends>
                            <applications>
                                <application>
                                    <name>NVMe</name>
                                </application>
                            </applications>
                            <request_method>POST</request_method>
                        </item_prototype>
                        <item_prototype>
                            <name>Nvme: CRC error count for {#NVME}</name>
                            <type>ZABBIX_ACTIVE</type>
                            <key>nvme.device.smart[{#NVME},crc_error_count]</key>
                            <delay>5m</delay>
                            <history>1w</history>
                            <trends>90d</trends>
                            <applications>
                                <application>
                                    <name>NVMe</name>
                                </application>
                            </applications>
                            <request_method>POST</request_method>
                        </item_prototype>
                        <item_prototype>
                            <name>Nvme: Critical warnings for {#NVME}</name>
                            <type>ZABBIX_ACTIVE</type>
                            <key>nvme.device.smart[{#NVME},critical_warning]</key>
                            <delay>5m</delay>
                            <history>1w</history>
                            <trends>90d</trends>
                            <applications>
                                <application>
                                    <name>NVMe</name>
                                </application>
                            </applications>
                            <request_method>POST</request_method>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <expression>{last()}&gt;0</expression>
                                    <name>NVMe: Critical warning value for {#NVME} on {HOST.NAME} is &gt; 0</name>
                                    <priority>DISASTER</priority>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                        <item_prototype>
                            <name>Nvme: Data units read for {#NVME}</name>
                            <type>ZABBIX_ACTIVE</type>
                            <key>nvme.device.smart[{#NVME},data_units_read]</key>
                            <delay>5m</delay>
                            <history>1w</history>
                            <trends>90d</trends>
                            <applications>
                                <application>
                                    <name>NVMe</name>
                                </application>
                            </applications>
                            <request_method>POST</request_method>
                        </item_prototype>
                        <item_prototype>
                            <name>Nvme: Data units written for {#NVME}</name>
                            <type>ZABBIX_ACTIVE</type>
                            <key>nvme.device.smart[{#NVME},data_units_written]</key>
                            <delay>5m</delay>
                            <history>1w</history>
                            <trends>90d</trends>
                            <applications>
                                <application>
                                    <name>NVMe</name>
                                </application>
                            </applications>
                            <request_method>POST</request_method>
                        </item_prototype>
                        <item_prototype>
                            <name>Nvme: End to end error detection count for {#NVME}</name>
                            <type>ZABBIX_ACTIVE</type>
                            <key>nvme.device.smart[{#NVME},end_to_end_error_detection_count]</key>
                            <delay>5m</delay>
                            <history>1w</history>
                            <trends>90d</trends>
                            <applications>
                                <application>
                                    <name>NVMe</name>
                                </application>
                            </applications>
                            <request_method>POST</request_method>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <expression>{last()}&gt;0</expression>
                                    <name>NVMe: End to end error detection count on {#NVME} on {HOST.NAME} &gt; 0</name>
                                    <priority>HIGH</priority>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                        <item_prototype>
                            <name>Nvme: Erase fail count for {#NVME}</name>
                            <type>ZABBIX_ACTIVE</type>
                            <key>nvme.device.smart[{#NVME},erase_fail_count]</key>
                            <delay>5m</delay>
                            <history>1w</history>
                            <trends>90d</trends>
                            <applications>
                                <application>
                                    <name>NVMe</name>
                                </application>
                            </applications>
                            <request_method>POST</request_method>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <expression>{last()}&gt;0</expression>
                                    <name>NVMe: Erase fail count on {#NVME} on {HOST.NAME} &gt; 0</name>
                                    <priority>HIGH</priority>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                        <item_prototype>
                            <name>Nvme: Host read commands for {#NVME}</name>
                            <type>ZABBIX_ACTIVE</type>
                            <key>nvme.device.smart[{#NVME},host_read_commands]</key>
                            <delay>5m</delay>
                            <history>1w</history>
                            <trends>90d</trends>
                            <applications>
                                <application>
                                    <name>NVMe</name>
                                </application>
                            </applications>
                            <request_method>POST</request_method>
                        </item_prototype>
                        <item_prototype>
                            <name>Nvme: Host write commands for {#NVME}</name>
                            <type>ZABBIX_ACTIVE</type>
                            <key>nvme.device.smart[{#NVME},host_write_commands]</key>
                            <delay>5m</delay>
                            <history>1w</history>
                            <trends>90d</trends>
                            <applications>
                                <application>
                                    <name>NVMe</name>
                                </application>
                            </applications>
                            <request_method>POST</request_method>
                        </item_prototype>
                        <item_prototype>
                            <name>Nvme: Media errors for {#NVME}</name>
                            <type>ZABBIX_ACTIVE</type>
                            <key>nvme.device.smart[{#NVME},media_errors]</key>
                            <delay>5m</delay>
                            <history>1w</history>
                            <trends>90d</trends>
                            <applications>
                                <application>
                                    <name>NVMe</name>
                                </application>
                            </applications>
                            <request_method>POST</request_method>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <expression>{last()}&gt;0</expression>
                                    <name>NVMe: Media errors on {#NVME} on {HOST.NAME}</name>
                                    <priority>HIGH</priority>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                        <item_prototype>
                            <name>Nvme: Number of error log entries for {#NVME}</name>
                            <type>ZABBIX_ACTIVE</type>
                            <key>nvme.device.smart[{#NVME},num_err_log_entries]</key>
                            <delay>5m</delay>
                            <history>1w</history>
                            <trends>90d</trends>
                            <applications>
                                <application>
                                    <name>NVMe</name>
                                </application>
                            </applications>
                            <request_method>POST</request_method>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <expression>{last()}&gt;0</expression>
                                    <name>NVMe: Number of errorlog entries for {#NVME} on {HOST.NAME} is higher than 0</name>
                                    <priority>HIGH</priority>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                        <item_prototype>
                            <name>Nvme: Percentage used for {#NVME}</name>
                            <type>ZABBIX_ACTIVE</type>
                            <key>nvme.device.smart[{#NVME},percentage_used]</key>
                            <delay>5m</delay>
                            <history>1w</history>
                            <trends>90d</trends>
                            <units>%</units>
                            <applications>
                                <application>
                                    <name>NVMe</name>
                                </application>
                            </applications>
                            <request_method>POST</request_method>
                        </item_prototype>
                        <item_prototype>
                            <name>Nvme: PLL lock loss count for {#NVME}</name>
                            <type>ZABBIX_ACTIVE</type>
                            <key>nvme.device.smart[{#NVME},pll_lock_loss_count]</key>
                            <delay>5m</delay>
                            <history>1w</history>
                            <trends>90d</trends>
                            <applications>
                                <application>
                                    <name>NVMe</name>
                                </application>
                            </applications>
                            <request_method>POST</request_method>
                        </item_prototype>
                        <item_prototype>
                            <name>Nvme: Power cycles for {#NVME}</name>
                            <type>ZABBIX_ACTIVE</type>
                            <key>nvme.device.smart[{#NVME},power_cycles]</key>
                            <delay>5m</delay>
                            <history>1w</history>
                            <trends>90d</trends>
                            <applications>
                                <application>
                                    <name>NVMe</name>
                                </application>
                            </applications>
                            <request_method>POST</request_method>
                        </item_prototype>
                        <item_prototype>
                            <name>Nvme: Power on hours for {#NVME}</name>
                            <type>ZABBIX_ACTIVE</type>
                            <key>nvme.device.smart[{#NVME},power_on_hours]</key>
                            <delay>5m</delay>
                            <history>1w</history>
                            <trends>90d</trends>
                            <applications>
                                <application>
                                    <name>NVMe</name>
                                </application>
                            </applications>
                            <request_method>POST</request_method>
                        </item_prototype>
                        <item_prototype>
                            <name>Nvme: Program fail count for {#NVME}</name>
                            <type>ZABBIX_ACTIVE</type>
                            <key>nvme.device.smart[{#NVME},program_fail_count]</key>
                            <delay>5m</delay>
                            <history>1w</history>
                            <trends>90d</trends>
                            <applications>
                                <application>
                                    <name>NVMe</name>
                                </application>
                            </applications>
                            <request_method>POST</request_method>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <expression>{last()}&gt;10</expression>
                                    <name>NVMe: Program fail count on {#NVME} on {HOST.NAME} &gt; 10</name>
                                    <priority>HIGH</priority>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                        <item_prototype>
                            <name>Nvme: Retry buffer overflow count for {#NVME}</name>
                            <type>ZABBIX_ACTIVE</type>
                            <key>nvme.device.smart[{#NVME},retry_buffer_overflow_count]</key>
                            <delay>5m</delay>
                            <history>1w</history>
                            <trends>90d</trends>
                            <applications>
                                <application>
                                    <name>NVMe</name>
                                </application>
                            </applications>
                            <request_method>POST</request_method>
                        </item_prototype>
                        <item_prototype>
                            <name>Nvme: Temperature for {#NVME}</name>
                            <type>ZABBIX_ACTIVE</type>
                            <key>nvme.device.smart[{#NVME},temperature]</key>
                            <delay>5m</delay>
                            <history>1w</history>
                            <trends>90d</trends>
                            <units>C</units>
                            <applications>
                                <application>
                                    <name>NVMe</name>
                                </application>
                            </applications>
                            <request_method>POST</request_method>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <expression>{last()}&gt;50</expression>
                                    <name>NVMe: Temperature for {#NVME} on {HOST.NAME} is higher than 50C</name>
                                    <priority>HIGH</priority>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                        <item_prototype>
                            <name>Nvme: Timed workload host reads for {#NVME}</name>
                            <type>ZABBIX_ACTIVE</type>
                            <key>nvme.device.smart[{#NVME},timed_workload_host_reads]</key>
                            <delay>5m</delay>
                            <history>1w</history>
                            <trends>90d</trends>
                            <applications>
                                <application>
                                    <name>NVMe</name>
                                </application>
                            </applications>
                            <request_method>POST</request_method>
                        </item_prototype>
                        <item_prototype>
                            <name>Nvme: Timed workload media wear for {#NVME}</name>
                            <type>ZABBIX_ACTIVE</type>
                            <key>nvme.device.smart[{#NVME},timed_workload_media_wear]</key>
                            <delay>5m</delay>
                            <history>1w</history>
                            <trends>90d</trends>
                            <applications>
                                <application>
                                    <name>NVMe</name>
                                </application>
                            </applications>
                            <request_method>POST</request_method>
                        </item_prototype>
                        <item_prototype>
                            <name>Nvme: Unsafe shutdowns for {#NVME}</name>
                            <type>ZABBIX_ACTIVE</type>
                            <key>nvme.device.smart[{#NVME},unsafe_shutdowns]</key>
                            <delay>5m</delay>
                            <history>1w</history>
                            <trends>90d</trends>
                            <applications>
                                <application>
                                    <name>NVMe</name>
                                </application>
                            </applications>
                            <request_method>POST</request_method>
                        </item_prototype>
                        <item_prototype>
                            <name>Nvme: Wear leveling for {#NVME}</name>
                            <type>ZABBIX_ACTIVE</type>
                            <key>nvme.device.smart[{#NVME},wear_leveling]</key>
                            <delay>5m</delay>
                            <history>1w</history>
                            <trends>90d</trends>
                            <applications>
                                <application>
                                    <name>NVMe</name>
                                </application>
                            </applications>
                            <request_method>POST</request_method>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <expression>{last()}&lt;40</expression>
                                    <name>NVMe: Wear leveling on {#NVME} on {HOST.NAME} below 40%</name>
                                    <priority>HIGH</priority>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                    </item_prototypes>
                    <request_method>POST</request_method>
                </discovery_rule>
            </discovery_rules>
        </template>
    </templates>
    <triggers>
        <trigger>
            <expression>{Template OSSO NVMe SMART:nvme.device.exists.last()}&lt;&gt;0 and&#13;
{Template OSSO NVMe SMART:vfs.file.exists[/usr/sbin/nvme].last()}=0</expression>
            <name>NVMe: Found nvme-device but no nvme-cli on {HOST.NAME}</name>
            <priority>HIGH</priority>
        </trigger>
    </triggers>
</zabbix_export>
