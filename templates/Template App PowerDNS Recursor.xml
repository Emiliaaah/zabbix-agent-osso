<?xml version="1.0" encoding="UTF-8"?>
<zabbix_export>
    <version>5.2</version>
    <date>2021-09-23T10:14:12Z</date>
    <groups>
        <group>
            <name>TEMPLATES</name>
        </group>
    </groups>
    <templates>
        <template>
            <template>Template App PowerDNS Recursor</template>
            <name>Template App PowerDNS Recursor</name>
            <groups>
                <group>
                    <name>TEMPLATES</name>
                </group>
            </groups>
            <applications>
                <application>
                    <name>PowerDNS</name>
                </application>
            </applications>
            <items>
                <item>
                    <name>Check if PowerDNS recursor is listening on port 53 (TCP)</name>
                    <type>ZABBIX_ACTIVE</type>
                    <key>net.tcp.listen[53]</key>
                    <history>3d</history>
                    <trends>90d</trends>
                    <applications>
                        <application>
                            <name>PowerDNS</name>
                        </application>
                    </applications>
                    <triggers>
                        <trigger>
                            <expression>{last()}&lt;&gt;1</expression>
                            <name>{HOST.NAME}: PowerDNS recursor not listening on port 53 (TCP)</name>
                            <priority>HIGH</priority>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <name>Check if PowerDNS recursor is listening on port 53 (UDP)</name>
                    <type>ZABBIX_ACTIVE</type>
                    <key>net.udp.listen[53]</key>
                    <history>3d</history>
                    <trends>90d</trends>
                    <applications>
                        <application>
                            <name>PowerDNS</name>
                        </application>
                    </applications>
                    <triggers>
                        <trigger>
                            <expression>{last()}&lt;&gt;1</expression>
                            <name>{HOST.NAME}: PowerDNS recursor not listening on port 53 (UDP)</name>
                            <priority>HIGH</priority>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <name>PowerDNS recursor json</name>
                    <type>ZABBIX_ACTIVE</type>
                    <key>pdns.recursor.json</key>
                    <delay>30s</delay>
                    <history>3d</history>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <applications>
                        <application>
                            <name>PowerDNS</name>
                        </application>
                    </applications>
                </item>
                <item>
                    <name>PowerDNS recursor all-outqueries</name>
                    <type>DEPENDENT</type>
                    <key>pdns.recursor.speed.all-outqueries</key>
                    <delay>0</delay>
                    <history>7d</history>
                    <value_type>FLOAT</value_type>
                    <units>qps</units>
                    <description>Number of outgoing queries sent</description>
                    <applications>
                        <application>
                            <name>PowerDNS</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.['all-outqueries']</parameter>
                            </parameters>
                        </step>
                        <step>
                            <type>CHANGE_PER_SECOND</type>
                            <parameters>
                                <parameter/>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>pdns.recursor.json</key>
                    </master_item>
                </item>
                <item>
                    <name>PowerDNS recursor answers-slow</name>
                    <type>DEPENDENT</type>
                    <key>pdns.recursor.speed.answers-slow</key>
                    <delay>0</delay>
                    <history>7d</history>
                    <value_type>FLOAT</value_type>
                    <units>qps</units>
                    <description>Number of queries answered in more than 1000 ms</description>
                    <applications>
                        <application>
                            <name>PowerDNS</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.['answers-slow']</parameter>
                            </parameters>
                        </step>
                        <step>
                            <type>CHANGE_PER_SECOND</type>
                            <parameters>
                                <parameter/>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>pdns.recursor.json</key>
                    </master_item>
                </item>
                <item>
                    <name>PowerDNS recursor answers0-1</name>
                    <type>DEPENDENT</type>
                    <key>pdns.recursor.speed.answers0-1</key>
                    <delay>0</delay>
                    <history>7d</history>
                    <value_type>FLOAT</value_type>
                    <units>qps</units>
                    <description>Number of queries answered in less than 1 ms</description>
                    <applications>
                        <application>
                            <name>PowerDNS</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.['answers0-1']</parameter>
                            </parameters>
                        </step>
                        <step>
                            <type>CHANGE_PER_SECOND</type>
                            <parameters>
                                <parameter/>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>pdns.recursor.json</key>
                    </master_item>
                </item>
                <item>
                    <name>PowerDNS recursor answers1-10</name>
                    <type>DEPENDENT</type>
                    <key>pdns.recursor.speed.answers1-10</key>
                    <delay>0</delay>
                    <history>7d</history>
                    <value_type>FLOAT</value_type>
                    <units>qps</units>
                    <description>Number of queries answered in 1-10 ms</description>
                    <applications>
                        <application>
                            <name>PowerDNS</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.['answers1-10']</parameter>
                            </parameters>
                        </step>
                        <step>
                            <type>CHANGE_PER_SECOND</type>
                            <parameters>
                                <parameter/>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>pdns.recursor.json</key>
                    </master_item>
                </item>
                <item>
                    <name>PowerDNS recursor answers10-100</name>
                    <type>DEPENDENT</type>
                    <key>pdns.recursor.speed.answers10-100</key>
                    <delay>0</delay>
                    <history>7d</history>
                    <value_type>FLOAT</value_type>
                    <units>qps</units>
                    <description>Number of queries answered in 10-100 ms</description>
                    <applications>
                        <application>
                            <name>PowerDNS</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.['answers10-100']</parameter>
                            </parameters>
                        </step>
                        <step>
                            <type>CHANGE_PER_SECOND</type>
                            <parameters>
                                <parameter/>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>pdns.recursor.json</key>
                    </master_item>
                </item>
                <item>
                    <name>PowerDNS recursor answers100-1000</name>
                    <type>DEPENDENT</type>
                    <key>pdns.recursor.speed.answers100-1000</key>
                    <delay>0</delay>
                    <history>7d</history>
                    <value_type>FLOAT</value_type>
                    <units>qps</units>
                    <description>Number of queries answered in 100-1000 ms</description>
                    <applications>
                        <application>
                            <name>PowerDNS</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.['answers100-1000']</parameter>
                            </parameters>
                        </step>
                        <step>
                            <type>CHANGE_PER_SECOND</type>
                            <parameters>
                                <parameter/>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>pdns.recursor.json</key>
                    </master_item>
                </item>
                <item>
                    <name>PowerDNS recursor cache-hits</name>
                    <type>DEPENDENT</type>
                    <key>pdns.recursor.speed.cache-hits</key>
                    <delay>0</delay>
                    <history>7d</history>
                    <value_type>FLOAT</value_type>
                    <units>qps</units>
                    <description>Number of cache hits</description>
                    <applications>
                        <application>
                            <name>PowerDNS</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.['cache-hits']</parameter>
                            </parameters>
                        </step>
                        <step>
                            <type>CHANGE_PER_SECOND</type>
                            <parameters>
                                <parameter/>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>pdns.recursor.json</key>
                    </master_item>
                </item>
                <item>
                    <name>PowerDNS recursor cache-misses</name>
                    <type>DEPENDENT</type>
                    <key>pdns.recursor.speed.cache-misses</key>
                    <delay>0</delay>
                    <history>7d</history>
                    <value_type>FLOAT</value_type>
                    <units>qps</units>
                    <description>Number of cache misses</description>
                    <applications>
                        <application>
                            <name>PowerDNS</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.['cache-misses']</parameter>
                            </parameters>
                        </step>
                        <step>
                            <type>CHANGE_PER_SECOND</type>
                            <parameters>
                                <parameter/>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>pdns.recursor.json</key>
                    </master_item>
                </item>
                <item>
                    <name>PowerDNS recursor dnssec-queries</name>
                    <type>DEPENDENT</type>
                    <key>pdns.recursor.speed.dnssec-queries</key>
                    <delay>0</delay>
                    <history>7d</history>
                    <value_type>FLOAT</value_type>
                    <units>qps</units>
                    <description>Number of DNSSEC queries</description>
                    <applications>
                        <application>
                            <name>PowerDNS</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.['dnssec-queries']</parameter>
                            </parameters>
                        </step>
                        <step>
                            <type>CHANGE_PER_SECOND</type>
                            <parameters>
                                <parameter/>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>pdns.recursor.json</key>
                    </master_item>
                </item>
                <item>
                    <name>PowerDNS recursor noerror-answers</name>
                    <type>DEPENDENT</type>
                    <key>pdns.recursor.speed.noerror-answers</key>
                    <delay>0</delay>
                    <history>7d</history>
                    <value_type>FLOAT</value_type>
                    <units>qps</units>
                    <description>Number of noerror answers</description>
                    <applications>
                        <application>
                            <name>PowerDNS</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.['noerror-answers']</parameter>
                            </parameters>
                        </step>
                        <step>
                            <type>CHANGE_PER_SECOND</type>
                            <parameters>
                                <parameter/>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>pdns.recursor.json</key>
                    </master_item>
                </item>
                <item>
                    <name>PowerDNS recursor nxdomain-answers</name>
                    <type>DEPENDENT</type>
                    <key>pdns.recursor.speed.nxdomain-answers</key>
                    <delay>0</delay>
                    <history>7d</history>
                    <value_type>FLOAT</value_type>
                    <units>qps</units>
                    <description>Number of nxdomain answers</description>
                    <applications>
                        <application>
                            <name>PowerDNS</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.['nxdomain-answers']</parameter>
                            </parameters>
                        </step>
                        <step>
                            <type>CHANGE_PER_SECOND</type>
                            <parameters>
                                <parameter/>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>pdns.recursor.json</key>
                    </master_item>
                </item>
                <item>
                    <name>PowerDNS recursor over-capacity-drops</name>
                    <type>DEPENDENT</type>
                    <key>pdns.recursor.speed.over-capacity-drops</key>
                    <delay>0</delay>
                    <history>7d</history>
                    <value_type>FLOAT</value_type>
                    <units>qps</units>
                    <description>Number of queries dropped because the threads limit was reached</description>
                    <applications>
                        <application>
                            <name>PowerDNS</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.['over-capacity-drops']</parameter>
                            </parameters>
                        </step>
                        <step>
                            <type>CHANGE_PER_SECOND</type>
                            <parameters>
                                <parameter/>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>pdns.recursor.json</key>
                    </master_item>
                </item>
                <item>
                    <name>PowerDNS recursor avg latency</name>
                    <type>DEPENDENT</type>
                    <key>pdns.recursor.speed.qa-latency</key>
                    <delay>0</delay>
                    <history>7d</history>
                    <units>µs</units>
                    <description>Average latency in microseconds</description>
                    <applications>
                        <application>
                            <name>PowerDNS</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.['qa-latency']</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>pdns.recursor.json</key>
                    </master_item>
                </item>
                <item>
                    <name>PowerDNS recursor questions</name>
                    <type>DEPENDENT</type>
                    <key>pdns.recursor.speed.questions</key>
                    <delay>0</delay>
                    <history>7d</history>
                    <value_type>FLOAT</value_type>
                    <units>qps</units>
                    <description>Number of questions</description>
                    <applications>
                        <application>
                            <name>PowerDNS</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.['questions']</parameter>
                            </parameters>
                        </step>
                        <step>
                            <type>CHANGE_PER_SECOND</type>
                            <parameters>
                                <parameter/>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>pdns.recursor.json</key>
                    </master_item>
                </item>
                <item>
                    <name>PowerDNS recursor servfail-answers</name>
                    <type>DEPENDENT</type>
                    <key>pdns.recursor.speed.servfail-answers</key>
                    <delay>0</delay>
                    <history>7d</history>
                    <value_type>FLOAT</value_type>
                    <units>qps</units>
                    <description>Number of servfail answers</description>
                    <applications>
                        <application>
                            <name>PowerDNS</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.['servfail-answers']</parameter>
                            </parameters>
                        </step>
                        <step>
                            <type>CHANGE_PER_SECOND</type>
                            <parameters>
                                <parameter/>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>pdns.recursor.json</key>
                    </master_item>
                </item>
                <item>
                    <name>PowerDNS recursor unauthorized-tcp</name>
                    <type>DEPENDENT</type>
                    <key>pdns.recursor.speed.unauthorized-tcp</key>
                    <delay>0</delay>
                    <history>7d</history>
                    <value_type>FLOAT</value_type>
                    <units>qps</units>
                    <description>Number of TCP questions denied because of allow-from restrictions</description>
                    <applications>
                        <application>
                            <name>PowerDNS</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.['unauthorized-tcp']</parameter>
                            </parameters>
                        </step>
                        <step>
                            <type>CHANGE_PER_SECOND</type>
                            <parameters>
                                <parameter/>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>pdns.recursor.json</key>
                    </master_item>
                </item>
                <item>
                    <name>PowerDNS recursor unauthorized-udp</name>
                    <type>DEPENDENT</type>
                    <key>pdns.recursor.speed.unauthorized-udp</key>
                    <delay>0</delay>
                    <history>7d</history>
                    <value_type>FLOAT</value_type>
                    <units>qps</units>
                    <description>Number of UDP questions denied because of allow-from restrictions</description>
                    <applications>
                        <application>
                            <name>PowerDNS</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.['unauthorized-udp']</parameter>
                            </parameters>
                        </step>
                        <step>
                            <type>CHANGE_PER_SECOND</type>
                            <parameters>
                                <parameter/>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>pdns.recursor.json</key>
                    </master_item>
                </item>
                <item>
                    <name>Check if PowerDNS recursor is running</name>
                    <type>ZABBIX_ACTIVE</type>
                    <key>proc.num[pdns_recursor]</key>
                    <history>3d</history>
                    <trends>90d</trends>
                    <applications>
                        <application>
                            <name>PowerDNS</name>
                        </application>
                    </applications>
                    <triggers>
                        <trigger>
                            <expression>{last()}&lt;&gt;1</expression>
                            <name>{HOST.NAME}: PowerDNS recursor not running</name>
                            <priority>HIGH</priority>
                        </trigger>
                    </triggers>
                </item>
            </items>
        </template>
    </templates>
    <graphs>
        <graph>
            <name>PowerDNS recursor Answer histogram</name>
            <type>STACKED</type>
            <ymin_type_1>FIXED</ymin_type_1>
            <graph_items>
                <graph_item>
                    <sortorder>1</sortorder>
                    <color>BFFF00</color>
                    <item>
                        <host>Template App PowerDNS Recursor</host>
                        <key>pdns.recursor.speed.answers0-1</key>
                    </item>
                </graph_item>
                <graph_item>
                    <sortorder>2</sortorder>
                    <color>FFFF00</color>
                    <item>
                        <host>Template App PowerDNS Recursor</host>
                        <key>pdns.recursor.speed.answers1-10</key>
                    </item>
                </graph_item>
                <graph_item>
                    <sortorder>3</sortorder>
                    <color>FFBF00</color>
                    <item>
                        <host>Template App PowerDNS Recursor</host>
                        <key>pdns.recursor.speed.answers10-100</key>
                    </item>
                </graph_item>
                <graph_item>
                    <sortorder>4</sortorder>
                    <color>FF8000</color>
                    <item>
                        <host>Template App PowerDNS Recursor</host>
                        <key>pdns.recursor.speed.answers100-1000</key>
                    </item>
                </graph_item>
                <graph_item>
                    <sortorder>5</sortorder>
                    <color>FF4000</color>
                    <item>
                        <host>Template App PowerDNS Recursor</host>
                        <key>pdns.recursor.speed.answers-slow</key>
                    </item>
                </graph_item>
            </graph_items>
        </graph>
        <graph>
            <name>PowerDNS recursor Q/A</name>
            <ymin_type_1>FIXED</ymin_type_1>
            <graph_items>
                <graph_item>
                    <sortorder>1</sortorder>
                    <color>0040FF</color>
                    <item>
                        <host>Template App PowerDNS Recursor</host>
                        <key>pdns.recursor.speed.questions</key>
                    </item>
                </graph_item>
                <graph_item>
                    <sortorder>2</sortorder>
                    <color>666699</color>
                    <item>
                        <host>Template App PowerDNS Recursor</host>
                        <key>pdns.recursor.speed.all-outqueries</key>
                    </item>
                </graph_item>
                <graph_item>
                    <sortorder>3</sortorder>
                    <color>BFFF00</color>
                    <item>
                        <host>Template App PowerDNS Recursor</host>
                        <key>pdns.recursor.speed.cache-hits</key>
                    </item>
                </graph_item>
                <graph_item>
                    <sortorder>4</sortorder>
                    <color>FFBF00</color>
                    <item>
                        <host>Template App PowerDNS Recursor</host>
                        <key>pdns.recursor.speed.cache-misses</key>
                    </item>
                </graph_item>
            </graph_items>
        </graph>
        <graph>
            <name>PowerDNS recursor Responses</name>
            <type>STACKED</type>
            <ymin_type_1>FIXED</ymin_type_1>
            <graph_items>
                <graph_item>
                    <sortorder>1</sortorder>
                    <color>80FF00</color>
                    <item>
                        <host>Template App PowerDNS Recursor</host>
                        <key>pdns.recursor.speed.noerror-answers</key>
                    </item>
                </graph_item>
                <graph_item>
                    <sortorder>2</sortorder>
                    <color>00FFFF</color>
                    <item>
                        <host>Template App PowerDNS Recursor</host>
                        <key>pdns.recursor.speed.nxdomain-answers</key>
                    </item>
                </graph_item>
                <graph_item>
                    <sortorder>3</sortorder>
                    <color>CFD8DC</color>
                    <item>
                        <host>Template App PowerDNS Recursor</host>
                        <key>pdns.recursor.speed.servfail-answers</key>
                    </item>
                </graph_item>
                <graph_item>
                    <sortorder>4</sortorder>
                    <color>FF4000</color>
                    <item>
                        <host>Template App PowerDNS Recursor</host>
                        <key>pdns.recursor.speed.over-capacity-drops</key>
                    </item>
                </graph_item>
            </graph_items>
        </graph>
    </graphs>
</zabbix_export>
